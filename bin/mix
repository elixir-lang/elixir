#! /bin/sh

readlink_f () {
  cd "$(dirname "$1")" > /dev/null
  filename="$(basename "$1")"
  if [ -h "$filename" ]; then
    readlink_f "$(readlink "$filename")"
  else
    echo "`pwd -P`/$filename"
  fi
}

SELF=$(readlink_f "$0")
SCRIPT_PATH=$(dirname "$SELF")
ELIXIR_PATH="$SCRIPT_PATH"/elixir

# If the Elixir executable is not in the same folder then use the system
# version.

if [ -f "$ELIXIR_PATH" ]; then
  "$ELIXIR_PATH"  -e "Mix.start; Mix.CLI.main" -- "$@"
else
  exec /usr/bin/env elixir -e "Mix.start; Mix.CLI.main" -- "$@"
fi
